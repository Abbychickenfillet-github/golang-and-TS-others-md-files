# AWS EC2 執行個體建立筆記

---

## 金鑰對（Key Pair）

### RSA vs ED25519 — 選哪個？

| | RSA | ED25519 |
|---|---|---|
| **年代** | 1977 年，老牌 | 2011 年，新一代 |
| **安全性** | 夠用（需 2048+ bit） | 更高 |
| **速度** | 較慢 | 更快 |
| **金鑰長度** | 很長（3072 bit） | 很短（256 bit） |
| **相容性** | 所有 SSH 都支援 | OpenSSH 6.5+ 支援 |
| **建議** | 需要相容老系統才選 | ✅ **一般選這個** |

### .pem vs .ppk — 選哪個？

| | .pem | .ppk |
|---|---|---|
| **給誰用** | OpenSSH（Linux / Mac / Windows OpenSSH） | PuTTY（Windows 專用 SSH 工具） |
| **你該選** | ✅ **.pem**（你電腦有 OpenSSH 9.8） | 不需要 |

> `.pem` 檔只會下載**一次**，弄丟就要重新建立金鑰對。

### .pem 放哪裡？

```
✅ ~/.ssh/my-key.pem     ← 推薦，集中管理金鑰
❌ 專案資料夾/my-key.pem  ← 不好，可能不小心 git push 上去洩漏私鑰
```

連線方式：
```bash
ssh -i ~/.ssh/my-key.pem ec2-user@<你的EC2公開IP>
```

---

## 執行個體類型（Instance Type）

### 為什麼有 871 種？

AWS 把機器分成不同**家族**，每個家族有不同大小（small / medium / large ...）：

| 家族前綴 | 用途 | 例子 |
|---------|------|------|
| **t** | 一般用途（突發效能） | t2.micro, t3.micro |
| **m** | 一般用途（穩定效能） | m5.large, m6i.xlarge |
| **c** | 運算密集（CPU 強） | c5.large |
| **r** | 記憶體密集（RAM 大） | r5.large |
| **g / p** | GPU 運算（AI/ML） | g4dn.xlarge, p3.2xlarge |
| **i / d** | 儲存密集（大硬碟） | i3.large |

家族 × 大小 的排列組合 = 871 種，大部分你用不到。

### vCPU 是什麼？

**vCPU = Virtual CPU = 虛擬 CPU**

EC2 是跑在 AWS 機房的**虛擬機器**，一台實體伺服器被切成很多份。
vCPU 就是分配給你的虛擬處理器核心數。

```
AWS 機房的一台實體伺服器（例如 96 顆 CPU 核心）
├── EC2 instance A：分到 1 vCPU  ← 你的 t2.micro
├── EC2 instance B：分到 2 vCPU
├── EC2 instance C：分到 4 vCPU
└── ... 很多人共用一台實體機器
```

| 規格 | 白話 | 類比 |
|------|------|------|
| **1 vCPU** | 1 顆虛擬 CPU 核心 | 像一個工人 |
| **2 vCPU** | 2 顆虛擬 CPU 核心 | 兩個工人可以同時做事 |
| **1 GiB RAM** | 1 GB 記憶體 | 工作桌的大小 |

vCPU 越多 = 能同時處理越多事 = 越貴。

### 免費方案（Free Tier）能選什麼？

AWS 免費方案只有**特定類型**免費，通常是：

| 類型 | vCPU | RAM | 免費條件 |
|------|------|-----|---------|
| **t2.micro** | 1 | 1 GiB | ✅ 每月 750 小時（約等於一整個月） |
| **t3.micro** | 2 | 1 GiB | ✅ 部分區域免費 |

> **測試用選 `t2.micro` 就對了**，一個月不關機也不會被收費（在免費期間內）。

### 怎麼看是不是免費？

建立執行個體時，類型旁邊會標示 **「Free tier eligible」**（符合免費方案資格）。
沒有這個標示的 = 會被收費。

### 執行個體命名規則

```
t2.micro
│ │  │
│ │  └── 大小：micro < small < medium < large < xlarge < 2xlarge ...
│ └───── 世代：2 = 第二代（數字越大越新）
└────── 家族：t = 突發效能（適合流量不穩定的應用）
```

更多例子：
```
t2.micro   → t 家族、第 2 代、最小       ← 免費方案 ✅
t3.medium  → t 家族、第 3 代、中等       ← 要錢
m5.large   → m 家族（穩定）、第 5 代、大  ← 要錢
c5.xlarge  → c 家族（CPU 強）、第 5 代    ← 要錢，運算用
```

---

## 一句話總結

| 問題 | 答案 |
|------|------|
| 金鑰類型選哪個？ | **ED25519**（更安全更快） |
| 檔案格式選哪個？ | **.pem**（你有 OpenSSH） |
| .pem 放哪？ | `~/.ssh/`（不要放專案資料夾） |
| vCPU 是什麼？ | 虛擬 CPU 核心數，越多越快越貴 |
| 871 種選哪個？ | 測試用選 **t2.micro**（免費） |
| 怎麼看免費？ | 旁邊有 **Free tier eligible** 標示 |
