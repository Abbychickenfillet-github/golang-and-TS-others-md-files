# Network è«‹æ±‚æ’æŸ¥æŒ‡å—

## ğŸ” å¦‚ä½•æŸ¥çœ‹ Network è«‹æ±‚

### 1. æ‰“é–‹ Chrome DevTools
- æŒ‰ `F12` æˆ– `Ctrl+Shift+I` (Windows) / `Cmd+Option+I` (Mac)
- é»æ“Š **Network** æ¨™ç±¤

### 2. æŸ¥çœ‹è«‹æ±‚åˆ—è¡¨
- **è¶Šä¸‹é¢çš„è«‹æ±‚ = è¶Šæ–°çš„è«‹æ±‚**ï¼ˆæ™‚é–“è»¸å¾ä¸Šåˆ°ä¸‹ï¼‰
- ç´…è‰² âŒ = è«‹æ±‚å¤±æ•—
- é»ƒè‰² âš ï¸ = è­¦å‘Šï¼ˆé€šå¸¸æ˜¯ CORS æˆ–ç·©å­˜å•é¡Œï¼‰
- ç¶ è‰² âœ“ = è«‹æ±‚æˆåŠŸ

### 3. æŸ¥çœ‹å¤±æ•—çš„è«‹æ±‚è©³æƒ…

é»æ“Šå¤±æ•—çš„è«‹æ±‚ï¼ˆç´…è‰² âŒï¼‰ï¼Œç„¶å¾ŒæŸ¥çœ‹ï¼š

#### **Headers æ¨™ç±¤**
- **Request URL**: æª¢æŸ¥ URL æ˜¯å¦æ­£ç¢º
- **Request Method**: GET/POST/PATCH/DELETE
- **Status Code**:
  - `200` = æˆåŠŸ
  - `401` = èªè­‰å¤±æ•—ï¼ˆtoken éæœŸæˆ–ç„¡æ•ˆï¼‰
  - `403` = æ¬Šé™ä¸è¶³
  - `404` = API è·¯å¾‘ä¸å­˜åœ¨
  - `500` = å¾Œç«¯ä¼ºæœå™¨éŒ¯èª¤
  - `(failed)` = ç¶²è·¯é€£ç·šå•é¡Œ

#### **Response æ¨™ç±¤**
- æŸ¥çœ‹å¾Œç«¯è¿”å›çš„éŒ¯èª¤è¨Šæ¯
- å¸¸è¦‹éŒ¯èª¤ï¼š
  ```json
  {
    "detail": "Token expired"  // Token éæœŸ
  }
  ```

#### **Timing æ¨™ç±¤**
- **Queued**: è«‹æ±‚åœ¨ç€è¦½å™¨éšŠåˆ—ä¸­ç­‰å¾…çš„æ™‚é–“
- **Stalled**: è«‹æ±‚è¢«é˜»å¡çš„æ™‚é–“
- **Waiting (TTFB)**: ç­‰å¾…å¾Œç«¯å›æ‡‰çš„æ™‚é–“
- **Content Download**: ä¸‹è¼‰å›æ‡‰å…§å®¹çš„æ™‚é–“

## ğŸ› å¸¸è¦‹å•é¡Œæ’æŸ¥

### å•é¡Œ 1: æ‰€æœ‰è«‹æ±‚éƒ½å¤±æ•—ï¼ˆç´…è‰² âŒï¼‰

**å¯èƒ½åŸå› ï¼š**
1. **å¾Œç«¯æ²’æœ‰é‹è¡Œ**
   - æª¢æŸ¥ `http://localhost:8003` æ˜¯å¦å¯ä»¥è¨ªå•
   - åœ¨ç€è¦½å™¨ç›´æ¥è¨ªå• `http://localhost:8003/api/v1/companies/`

2. **CORS å•é¡Œ**
   - æŸ¥çœ‹ Console æ˜¯å¦æœ‰ CORS éŒ¯èª¤
   - æª¢æŸ¥å¾Œç«¯çš„ CORS è¨­å®š

3. **Token éæœŸ**
   - æŸ¥çœ‹å¤±æ•—è«‹æ±‚çš„ Responseï¼Œçœ‹æ˜¯å¦æœ‰ "Token expired"
   - é‡æ–°ç™»å…¥ç²å–æ–° token

### å•é¡Œ 2: è«‹æ±‚å¡åœ¨ Queue å¾ˆä¹…ï¼ˆ22 åˆ†é˜ï¼‰

**å¯èƒ½åŸå› ï¼š**
1. **ç€è¦½å™¨é€£ç·šæ•¸é™åˆ¶**
   - Chrome å°åŒä¸€å€‹ domain æœ€å¤š 6 å€‹ä¸¦ç™¼é€£ç·š
   - å¦‚æœå‰é¢æœ‰è«‹æ±‚å¡ä½ï¼Œå¾Œé¢çš„è«‹æ±‚è¦æ’éšŠ

2. **å‰é¢çš„è«‹æ±‚æ²’æœ‰å®Œæˆ**
   - æª¢æŸ¥æ˜¯å¦æœ‰è«‹æ±‚ä¸€ç›´è™•æ–¼ "pending" ç‹€æ…‹
   - å–æ¶ˆæˆ–é‡æ–°æ•´ç†é é¢

**è§£æ±ºæ–¹æ³•ï¼š**
- é—œé–‰æ‰€æœ‰ç€è¦½å™¨åˆ†é 
- é‡æ–°é–‹å•Ÿä¸€å€‹æ–°åˆ†é 
- æ¸…é™¤ç€è¦½å™¨ç·©å­˜ï¼ˆ`Ctrl+Shift+Delete`ï¼‰

### å•é¡Œ 3: 401 Unauthorized

**å¯èƒ½åŸå› ï¼š**
1. Token éæœŸ
2. Token æ ¼å¼éŒ¯èª¤
3. å¾Œç«¯é©—è­‰é‚è¼¯æœ‰å•é¡Œ

**è§£æ±ºæ–¹æ³•ï¼š**
1. ç™»å‡ºä¸¦é‡æ–°ç™»å…¥
2. æª¢æŸ¥ localStorage ä¸­çš„ token
3. æŸ¥çœ‹å¾Œç«¯ logs ç¢ºèªé©—è­‰é‚è¼¯

### å•é¡Œ 4: 404 Not Found

**å¯èƒ½åŸå› ï¼š**
1. API è·¯å¾‘éŒ¯èª¤
2. å¾Œç«¯è·¯ç”±æ²’æœ‰è¨»å†Š

**è§£æ±ºæ–¹æ³•ï¼š**
1. æª¢æŸ¥ API è·¯å¾‘æ˜¯å¦æ­£ç¢º
2. æŸ¥çœ‹å¾Œç«¯è·¯ç”±è¨»å†Š

## ğŸ”§ å¿«é€Ÿè¨ºæ–·æ­¥é©Ÿ

### Step 1: æª¢æŸ¥å¾Œç«¯æ˜¯å¦é‹è¡Œ
```bash
# åœ¨çµ‚ç«¯åŸ·è¡Œ
curl http://localhost:8003/api/v1/companies/
```

### Step 2: æª¢æŸ¥ Token æ˜¯å¦æœ‰æ•ˆ
åœ¨ Console åŸ·è¡Œï¼š
```javascript
// æŸ¥çœ‹ç•¶å‰ token
localStorage.getItem('token')

// æ¸¬è©¦ API è«‹æ±‚
fetch('http://localhost:8003/api/v1/companies/?skip=0&limit=10', {
  headers: {
    'Authorization': `Bearer ${localStorage.getItem('token')}`
  }
}).then(r => r.json()).then(console.log)
```

### Step 3: æª¢æŸ¥ Network è«‹æ±‚
1. æ‰“é–‹ Network æ¨™ç±¤
2. é‡æ–°æ•´ç†é é¢ï¼ˆ`F5`ï¼‰
3. æŸ¥çœ‹ç¬¬ä¸€å€‹å¤±æ•—çš„è«‹æ±‚
4. é»æ“ŠæŸ¥çœ‹ Status Code å’Œ Response

## ğŸ“Š ä½ çš„å…·é«”å•é¡Œ

å¾ä½ æä¾›çš„è«‹æ±‚ä¾†çœ‹ï¼š
```javascript
fetch("http://localhost:8003/api/v1/companies/?skip=0&limit=1000&include_deleted=false", {
  "headers": {
    "authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
})
```

**æª¢æŸ¥é»ï¼š**
1. âœ… URL çœ‹èµ·ä¾†æ­£ç¢º
2. âœ… æœ‰ Authorization header
3. â“ Token æ˜¯å¦éæœŸï¼Ÿï¼ˆæª¢æŸ¥ Responseï¼‰
4. â“ å¾Œç«¯æ˜¯å¦é‹è¡Œï¼Ÿï¼ˆæª¢æŸ¥ Status Codeï¼‰

**ä¸‹ä¸€æ­¥ï¼š**
1. é»æ“Šé€™å€‹è«‹æ±‚ï¼ŒæŸ¥çœ‹ **Status Code**
2. æŸ¥çœ‹ **Response æ¨™ç±¤**ï¼Œçœ‹éŒ¯èª¤è¨Šæ¯
3. å¦‚æœ Status æ˜¯ 401ï¼Œé‡æ–°ç™»å…¥
4. å¦‚æœ Status æ˜¯ 500ï¼ŒæŸ¥çœ‹å¾Œç«¯ logs
